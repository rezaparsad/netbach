{% extends 'main/base.html' %}

{% block title %}{% if page.title %}{{ page.title }}{% else %}{{ page.name }}{% endif %}{% endblock %}
{% block titletwitter %}{% if page.title %}{{ page.title }}{% else %}{{ page.name }}{% endif %}{% endblock %}
{% block titleog %}{% if page.title %}{{ page.title }}{% else %}{{ page.name }}{% endif %}{% endblock %}

{% block head %}
    {% if page.description %}
        <meta name="description" content="{{ page.description }}">{% endif %}
    {% if page.description %}
        <meta name="twitter:description" content="{{ page.description }}">{% endif %}
    {% if category.description %}
        <meta name="og:description" content="{{ page.description }}">{% endif %}
    {% if page.keywords %}
        <meta name="keywords" content="{{ page.keywords }}">{% endif %}
    {% if page.image_meta %}
        <meta property="og:image" content="https://netbach.com
                {% if page.image_meta.resized_file %}{{ page.image_meta.resized_file.url }}{% else %}{{ page.image_meta.file.url }}{% endif %}">
    {% endif %}
    {% if page.image_meta %}
        <meta name="twitter:image" content="https://netbach.com
                {% if page.image_meta.resized_file %}{{ page.image_meta.resized_file.url }}{% else %}{{ page.image_meta.file.url }}{% endif %}">
    {% endif %}
    <meta property="og:type" content="page">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">
    <script type="application/ld+json">
        {
            "@context": "https://schema.org/",
            "@type": "CreativeWorkSeason",
            "name": "{{ page.title }}",
                "aggregateRating": {
                    "@type": "AggregateRating",
                    "ratingValue": "5",
                    "ratingCount": "2780",
                    "bestRating": "5",
                    "worstRating": "1"
                }
            }
    </script>
    {% if faqs %}
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "FAQPage",
                "mainEntity": [
                    {% for faq in faqs %}
                        {"@type": "Question", "name": "{{ faq.question }}", "acceptedAnswer": {"@type":"Answer","text":"{{ faq.answer }}"}}{% if not forloop.last %},{% endif %}
                    {% endfor %}
                ]
            }
        </script>
    {% endif %}
    <style>
        .card-server:hover {
            border-color: var(--primary-color-background) !important;
            cursor: pointer;
            transform: scale(1.02);
            transition: 0.3s linear;
        }
    </style>
{% endblock %}

{% block content %}
    <div style="background-color: #f1efef">
        <div class="d-flex py-3 bg-navbar justify-content-center px-4">
            <h1 class="text-white" style="line-height: 2.2rem">{{ page.name }}</h1>
        </div>
        <div class="container py-5">
            <div class="row mb-4">
                {% for server in server_list %}
                <div class="col-12 col-sm-3 mt-4">
                    <a title="ساخت سرور ابری" href="{{ cloud_url }}server/create/" class="text-decoration-none text-black"><div class="text-center py-2 rounded-3 border bg-white card-server">
                        <p class="mt-2 fw-bold fs-5">{{ server.name }}</p>
                        <hr>
                        <p>Ram: {{ server.ram }}</p>
                        <p>CPU: {{ server.cpu }}</p>
                        <p>Disk: {{ server.disk }}</p>
                        <p>Traffic: {{ server.traffic }}</p>
                        <hr>
                        <p>روزانه: {{ server.price_day }}</p>
                        <p class="text-success fw-bold">ماهانه: {{ server.price }}</p>
                    </div></a>
                </div>
                {% endfor %}
            {% if faqs %}
                <div class="container mt-5 bg-white rounded p-4 d-flex flex-column">
                    <h3 class="align-self-center mb-3">سوالات متداول</h3>
                    {% for faq in faqs %}
                        <div class="d-flex flex-column mt-4">
                            <strong style="text-align: justify">{{ faq.question }}</strong>
                            <span style="text-align: justify" class="mt-2">{{ faq.answer }}</span>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
    <div class="pagination my-4 d-flex justify-content-center">
        {% if server_list.number|add:"-3" > 1 %}
            <a style="border: 1px solid var(--primary-color-background); height: 36px; width: 36px; border-radius: 50%" class="btn me-2"
               href="?page=1">1</a>
            <span class="mx-2">...</span>
        {% endif %}
        {% if server_list.has_previous %}
            {% for b in '123' %}
                {% if server_list.number|add:forloop.counter|add:"-3" > 1 %}
                    <a style="border: 1px solid var(--primary-color-background); height: 36px; width: 36px; border-radius: 50%" class="btn me-2"
                       href="?page={{ server_list.number|add:forloop.counter|add:"-4" }}">{{ server_list.number|add:forloop.counter|add:"-4" }}</a>
                {% endif %}
            {% endfor %}
        {% endif %}
        <button class="btn bg-primary text-white me-2" style="height: 36px; width: 36px; border-radius: 50%">{{ server_list.number }}</button>
        {% if server_list.has_next %}
            {% for b in '123' %}
                {% if server_list.paginator.num_pages|add:"1" > server_list.number|add:forloop.counter %}
                    <a style="border: 1px solid var(--primary-color-background); height: 36px; width: 36px; border-radius: 50%" class="btn me-2"
                       href="?page={{ server_list.number|add:forloop.counter }}">{{ server_list.number|add:forloop.counter }}</a>
                {% endif %}
            {% endfor %}
        {% endif %}
        {% if server_list.paginator.num_pages > server_list.number|add:"3" %}
            <span class="mx-2">...</span>
            <a style="border: 1px solid var(--primary-color-background); height: 36px; width: 36px; border-radius: 50%" class="btn me-2"
               href="?page={{ server_list.paginator.num_pages }}">{{ server_list.paginator.num_pages }}</a>
        {% endif %}
    </div>
    <div class="my-5 mx-2 mx-sm-1">
        <div class="border shadow-sm rounded container">
            <h1 class="mb-4 mt-3">{{ page.name }}</h1>
            {% autoescape off %}
                {{ page.content }}
            {% endautoescape %}
        </div>
    </div>
    <div id="telegram-wrapper" class="position-fixed bottom-0 end-0 me-4 mb-4 bg-white shadow" style="width: 64px; height: 64px; border-radius: 50%">
        <a href="tg://resolve?domain=NetBach" title="تلگرام نت بچ">
            <svg style="fill: #1663af" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
                <path d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"></path>
            </svg>
        </a>
    </div>
{% endblock %}